<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Library</title>
    <style>
        /* Add your CSS styles for better appearance */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
            white-space: nowrap; /* Prevent line break within content */
            overflow: hidden;
            text-overflow: ellipsis; /* Display ellipsis for overflowed content */
        }

        td:hover {
            overflow: visible;
            white-space: normal; /* Display the full content on hover */
        }

        #search-bar {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<!-- Search bar for filtering books -->
<input type="text" id="search-bar-title" placeholder="Search by title" oninput="filterByTitle()">
<input type="text" id="search-bar-author" placeholder="Search by author" oninput="filterByAuthor()">

<label>
    <input type="checkbox" id="available-checkbox" onchange="filterAvailable()"> Show only available books
</label>

<!-- Book table with a unique ID -->
<table id="book-table">
    <thead>
        <tr>
            <th style="width: 45%;">Book</th>
            <th style="width: 30%;">Author</th>
            <th style="width: 10%;">Availability</th>
            <th style="width: 10%;"></th>
        </tr>
    </thead>
    <tbody>
        <!-- Each book is represented as a table row with tooltips -->
        <!-- Include more books based on your dataset -->
        <tr class="book">
            <td class="bookTitle" title="Boba Fett vol 1">Boba Fett vol 1</td>
            <td class="bookAuthor" title="Unknown author">Unknown author</td>
            <td title="Available">Available</td>
            <td title="Availability">Book</td>
        </tr>
        <tr class="book">
            <td class="bookTitle" title="Boba Fett vol 2">Boba Fett vol 2</td>
            <td class="bookAuthor" title="Unknown author">Unknown author</td>
            <!-- Empty cells for the third and fourth columns -->
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>


<button onclick="sendPostRequest()">Send POST Request</button>


<script>
// Function to filter books by title
function filterByTitle() {
    // Get the search input value for title
    var filterTitle = document.getElementById('search-bar-title').value.trim().toUpperCase();

    // Get the list of book title rows
    var bookTitles = document.getElementById('book-table').getElementsByClassName('bookTitle');

    // Loop through each book title row and hide those that don't match the search query
    for (var i = 0; i < bookTitles.length; i++) {
        var title = bookTitles[i].innerText.trim().toUpperCase();
        var row = bookTitles[i].parentNode; // Get the parent row of the book title

        // Use regular expression for a case-insensitive partial match
        var regex = new RegExp(filterTitle, 'i');

        if (title.match(regex)) {
            row.style.display = ''; // Show the entire row if the title matches
        } else {
            row.style.display = 'none'; // Hide the entire row if the title doesn't match
        }
    }
}

// Function to filter books by author and availability
function filterByAuthor() {
    // Get the search input value for author
    var filterAuthor = document.getElementById('search-bar-author').value.trim().toUpperCase();

    // Get the list of book author rows
    var bookAuthors = document.getElementById('book-table').getElementsByClassName('bookAuthor');

    // Loop through each book author row and hide those that don't match the search query
    for (var i = 0; i < bookAuthors.length; i++) {
        var author = bookAuthors[i].innerText.trim().toUpperCase();
        var row = bookAuthors[i].parentNode; // Get the parent row of the book author

        // Use regular expression for a case-insensitive partial match
        var regex = new RegExp(filterAuthor, 'i');

        if (author.match(regex)) {
            row.style.display = ''; // Show the entire row if the author matches
        } else {
            row.style.display = 'none'; // Hide the entire row if the author doesn't match
        }
    }
}
function filterAvailable() {
        // Get the checkbox state
        var showOnlyAvailable = document.getElementById('available-checkbox').checked;

        // Get the list of availability cells
        var availabilities = document.getElementById('book-table').getElementsByClassName('availability');

        // Loop through each availability cell and hide/show rows based on checkbox state
        for (var i = 0; i < availabilities.length; i++) {
            var availability = availabilities[i].innerText.trim().toUpperCase();
            var row = availabilities[i].parentNode; // Get the parent row of the availability

            if (showOnlyAvailable && availability !== 'AVAILABLE') {
                row.style.display = 'none'; // Hide the entire row if not available and checkbox is checked
            } else {
                row.style.display = ''; // Show the entire row otherwise
            }
        }
    }

// test function
function sendPostRequest() {
      // Replace with your backend URL
      const backendUrl = 'http://localhost:3000/testing';

      // Make a POST request to the backend with "Hello world" as the data
      fetch(backendUrl, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ test: 'Hello world' }),
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
        // Handle success if needed
      })
      .catch(error => {
        console.error('Error:', error);
        // Handle error if needed
      });
    }
</script>

</body>
</html>
